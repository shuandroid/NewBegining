# 常用文件操作

介绍一些在 android  中常见的文件操作


#### 1. 获取文件的大小

获取一个 file(只是文件，不是文件夹) 的大小

```
private static long getFileSize(File file) {
        long size = 0;

        if (!file.exists()) {
            return size;
        }

        FileInputStream fileInputStream = null;
        try {
            fileInputStream = new FileInputStream(file);
            size = fileInputStream.available();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fileInputStream != null) {
                try {
                    fileInputStream.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }

        return size;
}
```

#### 2. 递归的读取一个文件夹下面的所有文件

要区别开文件和文件夹

```
private static List<File> recursiveScanFile(File file) {

        List<File> tempFileList = new ArrayList<>();
        if (file.isFile()) {
            tempFileList.add(file);
            return tempFileList;
        }

		  // HiddenFilter 为 过滤隐藏文件 
        File resultFile[] = file.listFiles(new HiddenFilter());
        if (null == resultFile || 0 == resultFile.length) {
            return tempFileList;
        }

        for (File fileDir : resultFile) {
            tempFileList.addAll(recursiveScanFile(fileDir));
        }

        return tempFileList;
}
```

#### 3. 递归的删除一个文件夹下面的所有文件

如果是文件，那么直接删除，如果是是文件夹，那么递归的去寻找它下面的文件，逐个删除

```
    private static void recursiveDeleteDirectory(File fileDir) {

        if (fileDir.isFile()) {
            fileDir.delete();
            return;
        }

        if (fileDir.isDirectory()) {
            File files[] = fileDir.listFiles();

            if (null == files && 0 == files.length) {
                fileDir.delete();
                return;
            }

            for (File file : fileDir.listFiles()) {
                recursiveDirectory(file);
            }

            fileDir.delete();
        }
    }
```

#### 4. 获取一个 文件 list 的总大小

```
    private static long getFileListSize(List<File> fileList) {

        if (null == fileList || fileList.isEmpty()) {
            return 0;
        }

        long fileTotalSize = 0;
        for (File file : fileList) {
            fileTotalSize += getFileSize(file);
        }

        return fileTotalSize;
    }
```


#### 5. 获取一个文件夹的总大小

根据上述代码，我们可分为几步：

1. 获取这个文件夹下的所有文件, 得到一个 list

2. 再根据这些 list 去 获取每一个文件的大小

```
    private static long fetchFileDirTotalSize(String dirPath) {

        File file = new File(dirPath);

        return getFileListSize(recursiveScanFile(file));
    }
```


上述代码中，dirPath 为该文件夹的目录路径


#### 总结

简单记录下，常见的对文件的读取和删除 ~~~











